{"version":3,"file":"urlHelper.js","sources":["../../../../packages/h5GameTools/urlHelper.ts"],"sourcesContent":["import { AppTalking, ExitMethod } from '@gtLibTs/appTalking';\nimport { Logger } from '@gtLibTs/logger';\nimport { DetectDevice } from '@gtLibTs/utils/detectDevice';\nimport { getUrlQuery } from '@gtLibTs/utils/urlUtils';\n\nexport class UrlHelper {\n    static get shared() {\n        if (window.gtLibTsScope?.urlHelper) {\n            return window.gtLibTsScope.urlHelper;\n        }\n        return (window.gtLibTsScope ??= {}).urlHelper = new UrlHelper();\n    }\n\n    public gameType: string;\n    public sid: string;\n    public hallId: string;\n    public userId: string;\n    public rawLang: string;\n    public lang: string;\n    public rdaLang: string;\n    public domain = '';\n    public useProxy: boolean;\n    public isDemo: boolean;\n    public isSDK: boolean;\n    public gameCode: string;\n    public gameKind: number;\n    private initHistory: number;\n\n    get isSecure() {\n        try {\n            const domainUrl = new URL(this.domain);\n            return domainUrl.protocol === 'https:';\n        } catch {\n            return false;\n        }\n    }\n\n    constructor() {\n        const _parent = parent as any;\n\n        this.gameType = getUrlQuery('GameType') || _parent.game_id || '';\n        this.sid = getUrlQuery('sid') || _parent.SessionID || '';\n        this.hallId = getUrlQuery('HALLID') || _parent.HallID || '';\n        this.userId = _parent.UserID || '';\n\n        this.rawLang = getUrlQuery('lang') || _parent.lang || '';\n        this.lang = this.identifyLang(this.rawLang, 'BB');\n        this.rdaLang = this.identifyLang(this.rawLang, 'RD');\n\n        this.isDemo = getUrlQuery('demo') === '1' || _parent.Demo;\n        this.isSDK = location.protocol == 'file:';\n        this.isSDK ? this.getDomainInfoSDK() : this.getDomainInfoNormal();\n        this.useProxy = getUrlQuery('useProxy') === 'true';\n\n        this.gameCode = '1';\n        this.gameKind = 5;\n\n        this.initHistory = history.length;\n    }\n\n    private async getDomainInfoSDK() {\n        // FXSDK 載local file url protocal 會是file 開頭\n        // 因此需要從 url search 中 的 domain=xxx 中取得domain\n\n        const domain = getUrlQuery('domain');\n\n        if (!domain) throw new Error('UrlHelper.getDomainInfoSDK Error : 網址沒有domain參數');\n        if (!/^http[s]?:/.test(domain)) throw new Error('UrlHelper.getDomainInfoSDK Error : domain參數需要包含http or https protocol');\n\n        const parser = new URL(domain);\n        this.domain = parser.origin;\n    }\n\n    private async getDomainInfoNormal() {\n        this.domain = location.origin;\n    }\n\n    private async fetchServerIP() {\n        try {\n            const domainUrl = new URL(this.domain);\n            const url = `${domainUrl.origin}/ipl/app/flash/pig/game/casinoH5/GameAPI/FxDataApi.php?gtype=${this.gameType}&dm=${domainUrl.host}`;\n            const data = await (await fetch(url)).json();\n            return data.link || '';\n        } catch (e) {\n            Logger.warn(e);\n        }\n    }\n\n    private async checkCdnAlive(cdnProjectRoot: string, timeout: number) {\n        const controller = new AbortController();\n\n        setTimeout(() => {\n            controller.abort();\n        }, timeout);\n\n        const cdnSuccess = await fetch(`${cdnProjectRoot}index.html?${Date.now()}`, { signal: controller.signal })\n            .then(response => response.ok)\n            .catch(err => { console.error(err); return false; });\n\n        return cdnSuccess;\n    }\n\n    private leaveGame() {\n        if (typeof (parent as any).leaveFunction === 'function') {\n            this.leaveGame = () => {};\n            (parent as any).leaveFunction();\n        } else if (typeof (parent as any).gobacklobby === 'function') {\n            //fallback to RD3 gobacklobby\n            (parent as any).gobacklobby({ gamekind: this.gameKind });\n        } else {\n            //all rd3 method not found....\n            if (DetectDevice.isMobile) {\n                history.go(this.initHistory - history.length - 1);\n            } else {\n                window.close();\n                top?.close();\n            }\n        }\n    }\n\n    public identifyLang(lang: string, type: 'BB' | 'RD' = 'BB') {\n        const commonLang = {\n            ja: 'ja',\n            vi: 'vi',\n            th: 'th',\n            id: 'id',\n            es: 'es'\n        };\n\n        const specialLang = {\n            BB: {\n                tw: 'tw',\n                cn: 'cn',\n                kr: 'kr',\n                en: 'us'\n            },\n            RD: {\n                tw: 'zh-tw',\n                cn: 'zh-cn',\n                kr: 'ko',\n                en: 'en'\n            }\n        };\n\n        const finalLang = {\n            ...commonLang,\n            ...specialLang[type]\n        };\n\n        switch (lang) {\n            // 繁中\n            case 'zh_tw':\n            case 'zh-tw':\n            case 'tw':\n                return finalLang.tw;\n            // 簡中\n            case 'zh_cn':\n            case 'zh-cn':\n            case 'cn':\n            case 'ug':\n                return finalLang.cn;\n            // 日文\n            case 'jp':\n            case 'ja':\n                return finalLang.ja;\n            // 越文\n            case 'vi':\n            case 'vn':\n                return finalLang.vi;\n            // 泰文\n            case 'th':\n                return finalLang.th;\n            // 印尼文\n            case 'id':\n                return finalLang.id;\n            // 西班牙文\n            case 'es':\n                return finalLang.es;\n            // 韓文\n            case 'kr':\n            case 'ko':\n                return finalLang.kr;\n            // 英文\n            case 'en':\n            default:\n                return finalLang.en;\n        }\n    }\n\n    /**\n     * 取得研 A 的 domain，由研 C 的 domain 做轉換\n     * @param subDomain 加入自定的子網域\n     * @return 研 A 使用的 domain\n     */\n    public getDomainRdA() {\n        let subDomain = 'www.';\n\n        switch(true) {\n            case this.domain.includes('vir888'):\n                subDomain = 'ts-m.';\n                break;\n            case this.domain.includes('vir999'):\n                subDomain = 'www.';\n                break;\n            case this.domain.includes('04vip'):\n                subDomain = 'test.';\n                break;\n            case this.domain.includes('//888.'):\n                subDomain = '777.';\n                break;\n        }\n\n        if (/^http[s]?:/.test(this.domain)) {\n            return this.domain.replace(/(^http[s]?:\\/\\/)(.*)/, `$1${subDomain}$2`);\n        }\n        return this.domain;\n    }\n\n    /**\n     * 取得下注紀錄網址\n     */\n    public getBetHistoryURL() {\n        return `${this.domain}/ipl/portal.php/game/betrecord_search/kind5?GameCode=${this.gameCode}&GameType=${this.gameType}&sid=${this.sid}&lang=${this.rawLang}&rnd=${Date.now()}`;\n    }\n\n    /**\n     * 取得規則說明網址\n     */\n    public getRulePageURL() {\n        return `${this.domain}/ipl/app/help.php?GameType=${this.gameType}&lang=${this.rawLang}&rnd=${Date.now()}`;\n    }\n\n    /**\n     * 取得Feature版的功能說明\n     */\n    public getHelpURL() {\n        return `${this.domain}/ipl/portal.php/game/httpredirect?type=casinoruleinfo&gametype=${this.gameType}&lang=${this.rawLang}`;\n    }\n\n    public async getCdnUrl() {\n        const origin = location.href.split('index')[0];\n        const _parent = parent as any;\n\n        Logger.log(`[Origin Root] ${origin}`);\n\n        if (_parent.CDNIP) {\n            Logger.log(`[CDNIP] ${_parent.CDNIP}`);\n            //因為遊戲部分index.html 所以專案資料夾的路徑就是找index.html前面的部分\n            // ipl/app/flash/pig/game/casinoH5/DuoBao/index.html 線上獨立domain的路徑會是這樣\n            const projectRootPath = location.pathname.split('index.')[0];\n\n            // 到 cdn 底下因為掛載的關係 path 會變成 app/flash/pig/game/casinoH5/DuoBao/index.html\n            const cdnRootPath = projectRootPath.includes('flash/pig/') ? projectRootPath.replace('ipl/', '') : `app/flash/pig/game/casinoH5${projectRootPath}`;\n            const cdnUrl = `${_parent.CDNIP}${cdnRootPath}`;\n            if (await this.checkCdnAlive(cdnUrl, 3000)) {\n                //cdn 存活\n                return cdnUrl;\n            }\n        }\n\n        return origin;\n    }\n\n    private async getWsHost(): Promise<string> {\n        if ((parent as any).subLink) return (parent as any).subLink;\n\n        const domainUrl = new URL(this.domain);\n\n        if (this.useProxy) return domainUrl.host;\n\n        const serverIP = await this.fetchServerIP();\n        if (serverIP) return serverIP;\n\n        if (this.isDemo) return `fxdemo.${domainUrl.host}`;\n\n        return `fx8ec8.${domainUrl.host}`;\n    }\n\n    public async getWsUrl(wsHost?: string): Promise<string> {\n        const linkHost = wsHost ?? await this.getWsHost();\n\n        if (this.isSecure) {\n            return `wss://${linkHost}/fxCasino/fxLB?gameType=${this.gameType}`;\n        } else {\n            return `ws://${linkHost}/fxCasino/fxLB?gameType=${this.gameType}`;\n        }\n    }\n\n    /**\n     * 開啟下注紀錄視窗 (window open)\n     */\n    public gotoBetHistory() {\n        window.open(this.getBetHistoryURL(), '_blank');\n    }\n\n    /**\n     * 開啟規則說明視窗(window open)\n     */\n    public gotoRulePage() {\n        window.open(this.getRulePageURL(), '_blank');\n    }\n\n    /**\n     * 開啟存款頁面\n     */\n    public gotoBankerPage() {\n        if (typeof (parent as any).DepositUrl === 'function') {\n            (parent as any).DepositUrl({\n                sid: this.sid,\n                lang: this.rdaLang,\n                vnd: `${Date.now()}`\n            });\n        } else {\n            const url = `${this.getDomainRdA()}/infe/macenter/common/basicinfocontroller/redirect.json?SESSION_ID=${this.sid}&langx=${this.rdaLang}&&other=deposit&rnd${Date.now()}`;\n            window.open(url, '_blank');\n        }\n    }\n\n    /**\n     * 離開遊戲\n     * @param error 傳入錯誤的字典檔key值 會針對錯誤訊息判斷對應動作 , 若沒傳入則視為一般的離開遊戲\n     */\n    public exitByError(error?: string): void {\n        //先根據 error key 判定離開的動作類型\n        const exitMethod = (() => {\n            switch (error) {\n                case 'NOT_ENOUGH_BALANCE':  //額度不足\n                case 'MAXIMUN_EXCHANGE':    //兌換達上限\n                    return 'none';\n                case 'CHOOSE_MAINTAIN':\n                case 'SYSTEM_MAINTAIN':\n                    //維護\n                    return 'maintain';\n                case 'SID_IS_NOT_EXIST':\n                case 'API_EC_INVALID_USER_DATA':\n                case 'API_EC_ACC_SID_INVALID':\n                case 'API_EC_USER_DATA_ERROR':\n                    //sid 失效 , 登出\n                    return 'logout';\n                case 'ACCOUNT_HAS_BEEN_SUSPENDED':\n                case 'API_EC_ACC_STOP_BETTING':\n                case 'API_EC_ACC_USER_STOP_BETTING':\n                case 'API_EC_ACC_USER_ALL_STOP_BETTING':\n                    //帳號停權\n                    return 'accountSuspended';\n                default:\n                    //一般離開遊戲\n                    return 'exit';\n            }\n        })();\n\n        if (exitMethod !== 'none') {\n            this.exitGame(exitMethod);\n        }\n    }\n\n    /**\n     * 離開遊戲流程\n     */\n    public exitGame(exitMethod: ExitMethod = 'exit') {\n        //做aio 離開流程\n        AppTalking.shared.exit(exitMethod);\n        //一般遊戲離開流程\n        this.leaveGame();\n    }\n}"],"names":["getUrlQuery","Logger","DetectDevice","AppTalking"],"mappings":"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"}